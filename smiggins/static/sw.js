var __awaiter=this&&this.__awaiter||function(t,s,c,r){return new(c=c||Promise)(function(i,n){function o(t){try{a(r.next(t))}catch(t){n(t)}}function e(t){try{a(r.throw(t))}catch(t){n(t)}}function a(t){var n;t.done?i(t.value):((n=t.value)instanceof c?n:new c(function(t){t(n)})).then(o,e)}a((r=r.apply(t,s||[])).next())})};let sw_self=self;function canUseNotifications(){return __awaiter(this,void 0,void 0,function*(){return"granted"===(yield navigator.permissions.query({name:"notifications"})).state})}function handleNotification(t){return __awaiter(this,void 0,void 0,function*(){canUseNotifications()||console.log("[SW] recieved message but can't show notif"),sw_self.registration.showNotification("Notification",{body:(null==t?void 0:t.text())||"No notification content was given."})})}sw_self.addEventListener("push",function(t){t.waitUntil(handleNotification(t.data))}),console.log("[SW] init");